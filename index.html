<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/favicon-optimized.webp" type="image/webp">
    <!-- Fallback title and description - will be replaced during SSG -->
    <title>Alventis België - BTW Expert & Finance Consultant</title>
    <meta name="description" content="BTW-compliance en finance optimalisatie voor multinationals in België">
    <meta name="keywords" content="Viktoria Oris, Viktoria Oris België, Viktoria Oris btw expert, Viktoria Oris finance consultant, Viktoria Oris Alventis, btw expert België, finance consultant België, btw-compliance specialist, Alventis consultant">
    <meta name="author" content="Alventis" />
    
    <!-- Critical CSS inlined for fastest LCP -->
    <style>
      /* Critical above-the-fold styles */
      *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}
      ::before,::after{--tw-content:''}
      html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}
      body{margin:0;line-height:inherit;font-family:'Lato',sans-serif}
      h1,h2{margin:0;font-weight:inherit;color:inherit}
      p{margin:0}
      button{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}
      .font-playfair{font-family:'Playfair Display',serif}
      .font-lato{font-family:'Lato',sans-serif}
      .text-white{color:rgb(255 255 255)}
      .bg-primary{background-color:hsl(216 33% 20%)}
      .min-h-screen{min-height:100vh}
      .relative{position:relative}
      .absolute{position:absolute}
      .inset-0{inset:0}
      .z-0{z-index:0}
      .z-10{z-index:10}
      .flex{display:flex}
      .h-full{height:100%}
      .w-full{width:100%}
      .object-cover{object-fit:cover}
      .justify-center{justify-content:center}
      .items-center{align-items:center}
      .text-center{text-align:center}
      .px-4{padding-left:1rem;padding-right:1rem}
      .py-20{padding-top:5rem;padding-bottom:5rem}
    </style>
    
    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <!-- Preconnect for critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload critical optimized hero image with proper attribute -->
    <link rel="preload" href="/assets/finance-consulting-office-belgium-2.webp" as="image" type="image/webp" fetchpriority="high">
    
    <!-- CSP for preview environment only -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.gpteng.co https://cdn.jsdelivr.net https://www.googletagmanager.com; img-src 'self' data: https: blob:; font-src 'self' https://fonts.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; connect-src 'self' https: wss: ws:;">
    
    <!-- Preview overlay compatibility -->
    <script>
      // Environment detection without import.meta
      (function() {
        var hostname = window.location.hostname;
        window.__PREVIEW_MODE__ = hostname.includes('lovableproject.com') || 
                                  hostname === 'localhost' || 
                                  hostname.includes('cdn.gpteng.co');
        window.__APP_ENV__ = {
          isPreview: window.__PREVIEW_MODE__,
          isProd: window.location.protocol === 'https:' && !window.__PREVIEW_MODE__
        };
      })();
    </script>
    
    <!-- Optimized font loading with font-display: swap and critical font preloads -->
    <link rel="preload" href="https://fonts.gstatic.com/s/lato/v24/S6uyw4BMUTPHjx4wXg.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://fonts.gstatic.com/s/playfairdisplay/v36/nuFvD-vYSZviVYUb_rj3ij__anPXJzDwcbmjWBN2PKdFvXDXbtXK-F2qO0isEw.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;500;600&display=swap"></noscript>

    <!-- Dynamic SEO tags will be inserted here by setSEOTags() -->
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow" />
    <meta name="language" content="nl" />
    <meta name="geo.region" content="BE" />
    <meta name="geo.placename" content="België" />
    <meta name="geo.position" content="50.8503;4.3517" />
    <meta name="ICBM" content="50.8503, 4.3517" />
    
    <!-- Dynamic JSON-LD will be inserted here by setSEOTags() -->
    
    <!-- Custom cookie banner styles -->
    <style>
      .cc-window {
        z-index: 9999 !important;
        position: fixed !important;
        bottom: 20px !important;
        right: 20px !important;
        left: 20px !important;
        max-width: 400px !important;
        margin: 0 auto !important;
        background: hsl(0 0% 3.9%) !important;
        border: 1px solid hsl(0 0% 14.9%) !important;
        border-radius: 12px !important;
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5) !important;
        padding: 20px !important;
        font-family: 'Lato', system-ui, sans-serif !important;
      }
      .cc-message {
        color: hsl(0 0% 98%) !important;
        font-size: 14px !important;
        line-height: 1.5 !important;
        margin-bottom: 16px !important;
      }
      .cc-compliance {
        display: flex !important;
        gap: 8px !important;
        justify-content: flex-end !important;
        align-items: center !important;
      }
      .cc-btn {
        border: none !important;
        border-radius: 6px !important;
        padding: 8px 16px !important;
        font-size: 13px !important;
        font-weight: 500 !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
        text-decoration: none !important;
      }
      .cc-allow {
        background: hsl(47.9 95.8% 53.1%) !important;
        color: hsl(26.5 83.3% 14.1%) !important;
      }
      .cc-allow:hover {
        background: hsl(47.9 95.8% 50%) !important;
      }
      .cc-dismiss {
        background: transparent !important;
        color: hsl(0 0% 63.9%) !important;
        border: 1px solid hsl(0 0% 27.1%) !important;
      }
      .cc-dismiss:hover {
        background: hsl(0 0% 14.9%) !important;
        color: hsl(0 0% 98%) !important;
      }
      .cc-link {
        color: hsl(47.9 95.8% 53.1%) !important;
        text-decoration: underline !important;
        margin-left: 4px !important;
      }
      .cc-link:hover {
        color: hsl(47.9 95.8% 60%) !important;
      }
      @media (max-width: 768px) {
        .cc-window {
          bottom: 10px !important;
          right: 10px !important;
          left: 10px !important;
          max-width: none !important;
        }
        .cc-compliance {
          flex-direction: column !important;
          gap: 8px !important;
        }
        .cc-btn {
          width: 100% !important;
          text-align: center !important;
        }
      }
    </style>
    
    <!-- Defer non-critical cookie consent JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>
    <script defer>
    // Use requestIdleCallback to defer non-critical cookie consent initialization
    function initCookieConsent() {
      // Check if cookieconsent is available before initializing
      if (window.cookieconsent && typeof window.cookieconsent.initialise === 'function') {
        window.cookieconsent.initialise({
          palette: {
            popup: { background: "transparent" },
            button: { background: "transparent" }
          },
          theme: "classic",
          position: "bottom-right",
          type: "opt-in",
          content: {
            message: "We use cookies to analyze traffic and improve your experience.",
            dismiss: "Reject",
            allow: "Accept",
            link: "Learn more",
            href: "/privacy"
          },
          onInitialise: function(status) {
            if (status == 'allow') { loadAnalytics(); }
          },
          onStatusChange: function(status) {
            if (status == 'allow') { loadAnalytics(); }
          }
        });
      } else {
        console.warn("CookieConsent library not loaded properly");
      }
    }
    
    // Defer cookie consent initialization until after page load
    if ('requestIdleCallback' in window) {
      window.addEventListener('load', () => {
        requestIdleCallback(initCookieConsent);
      });
    } else {
      window.addEventListener('load', () => {
        setTimeout(initCookieConsent, 1);
      });
    }

    function loadAnalytics() {
      // Google Analytics loads only after consent - using environment variable fallback
      var gaId = 'G-ZV5408R1NP'; // Default fallback
      
      try {
        var gtagScript = document.createElement('script');
        gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaId;
        gtagScript.async = true;
        gtagScript.onerror = function() {
          console.warn('Failed to load Google Analytics');
        };
        document.head.appendChild(gtagScript);

        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        window.gtag = gtag;

        gtag('js', new Date());
        gtag('config', gaId);
      } catch (error) {
        console.warn('Error loading analytics:', error);
      }
    }
    </script>
  </head>

  <body>
    <div id="root"><!--app-html--></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Register service worker only in production -->
    <script>
      // Register service worker with proper environment detection
      if ('serviceWorker' in navigator && window.__APP_ENV__ && window.__APP_ENV__.isProd) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js')
            .then(function(registration) {
              console.log('SW registered: ', registration);
            })
            .catch(function(registrationError) {
              console.warn('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
  </body>
</html>
